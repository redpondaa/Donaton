(function(){"use strict";var t={5220:function(t,e,r){var n=r(9242),o=r(3396),a=r(7139);const i={key:0,class:"auth"},l={key:1,class:"timer"};function s(t,e,r,n,s,u){return(0,o.wg)(),(0,o.iD)("main",{onClick:e[0]||(e[0]=e=>t.startTimer=!t.startTimer)},[t.token?((0,o.wg)(),(0,o.iD)("div",l,(0,a.zw)(t.timer),1)):((0,o.wg)(),(0,o.iD)("div",i," Авторизация... "))])}var u=r(4870),c=(0,o.aZ)({name:"App",components:{},setup(){const t=10977,e="https://redpondaa.github.io/Donaton/",r=new URLSearchParams(new URL(window.location.toString()).hash.slice(1));let n=10,o=(0,u.iH)(0),a=0,i=(0,u.iH)(!1);r.has("rublePerMin")?(n=parseInt(r.get("rublePerMin")),localStorage.setItem("rublePerMin",n)):localStorage["rublePerMin"]&&(n=parseInt(localStorage["rublePerMin"])),r.has("timer")?(o.value=parseInt(r.get("timer")),localStorage.setItem("timer",o.value)):localStorage["timer"]&&(o.value=parseInt(localStorage["timer"])),r.has("lastAlertId")?(a=parseInt(r.get("lastAlertId")),localStorage.setItem("lastAlertId",a)):localStorage["lastAlertId"]&&(a=parseInt(localStorage["lastAlertId"]));let l=r.get("access_token");l||(window.location=`https://www.donationalerts.com/oauth/authorize?client_id=${t}&redirect_uri=${encodeURI(e)}&response_type=token&scope=oauth-donation-subscribe oauth-donation-index oauth-user-show`);const s=async()=>{const t=await(await fetch(`https://www.donationalerts.com/api/v1/alerts/donations?access_token=${l}`,{headers:{Authorization:`Bearer ${l}`}})).json();if(t.data.length>0){const e=t.data[0];e.id>a&&(t.data.forEach((t=>{t.id>a&&(a=t.id,localStorage.setItem("lastAlertId",a),o.value+=t.amount_in_user_currency/n*60,localStorage.setItem("timer",o.value))})),a=e.id,localStorage.setItem("lastAlertId",a))}},c=(0,u.Fl)((()=>{const t=o.value/86400;return`${Math.floor(t)}d ${new Date(1e3*o.value).toISOString().substr(11,8)}`}));return s(),setInterval((()=>{s()}),5e3),setInterval((()=>{i.value&&o.value>0&&(o.value--,localStorage.setItem("timer",o.value))}),1e3),{token:l,currentTimer:o,timer:c,startTimer:i}}}),d=r(89);const f=(0,d.Z)(c,[["render",s]]);var h=f;(0,n.ri)(h).mount("#app")}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}r.m=t,function(){var t=[];r.O=function(e,n,o,a){if(!n){var i=1/0;for(c=0;c<t.length;c++){n=t[c][0],o=t[c][1],a=t[c][2];for(var l=!0,s=0;s<n.length;s++)(!1&a||i>=a)&&Object.keys(r.O).every((function(t){return r.O[t](n[s])}))?n.splice(s--,1):(l=!1,a<i&&(i=a));if(l){t.splice(c--,1);var u=o();void 0!==u&&(e=u)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[n,o,a]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,a,i=n[0],l=n[1],s=n[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(o in l)r.o(l,o)&&(r.m[o]=l[o]);if(s)var c=s(r)}for(e&&e(n);u<i.length;u++)a=i[u],r.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return r.O(c)},n=self["webpackChunkdonaton"]=self["webpackChunkdonaton"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(5220)}));n=r.O(n)})();
//# sourceMappingURL=app.2cf96eed.js.map